<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="package" name="MovieMetadataUpdater">
    <property environment="env"/>
	
	<property name="target" value="target"/>
	<property name="name" value="metadata-updater"/>
	<property name="version" value="1.4"/>
	<property name="jarname" value="${name}-${version}.jar"/>
	<property name="launcher" value="MetadataTool"/>
	
	
	<target name="package" depends="init,copyJars,makeJar,makeLaunch">
		<copy  toDir="${target}">
			<fileset dir="docs">
			</fileset>
		</copy>
		<copy file="src/org/jdna/metadataupdater/metadataupdater.properties" tofile="${target}/metadataupdater.properties.sample"></copy>
		<zip destfile="${name}-${version}.zip">
			<fileset dir="${target}"></fileset>
		</zip>
	</target>
	
	<target name="copyJars">
		<copydir dest="${target}/libs" src="libs"></copydir>
	</target>

	<target name="makeJar">
		<jar destfile="${target}/libs/${jarname}">
			<fileset dir="bin"></fileset>
		</jar>
	</target>

	<target name="makeLaunch">
		<echo file="${target}/${launcher}.mf">Main-Class: ${launcher}</echo>
		<jar destfile="${target}/${launcher}.jar" manifest="${target}/${launcher}.mf">
			<fileset file="bin/${launcher}.class"/>
		</jar>
		<delete file="${target}/${launcher}.mf"></delete>
	</target>

    <target name="init">
        <mkdir dir="target"/>
        <copy includeemptydirs="false" todir="bin">
            <fileset dir="src" excludes="**/*.launch, **/*.java"/>
        </copy>
    </target>
    <target name="clean">
        <delete dir="target"/>
    </target>
</project>
